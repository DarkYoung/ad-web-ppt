<!doctype html><html><head><meta charset=UTF-8><title>高级Web课堂演示-Part1 - By 张健</title><link rel=stylesheet href=//cdn.staticfile.org/font-awesome/4.7.0/css/font-awesome.min.css><link rel=stylesheet href=//cdn.staticfile.org/prism/1.15.0/themes/prism.min.css><link rel=stylesheet href=//cdn.staticfile.org/KaTeX/0.10.0-rc.1/katex.min.css><link href=./css/chunk-vendors.73265bbc.css rel=stylesheet></head><body><div><article id=webslides><section slide class="slide bg-gradient-r aligncenter"><div class=wrap wrap=true><h1>Spring Boot</h1><hr><p class=text-intro>By 谢东方、张健、陈雷远、陈涛</p></div></section><section slide class="slide bg-gradient-r aligncenter"><div class=wrap wrap=true><h1 class="text-shadow animated flipInX">Part 1</h1><hr><h4 class=text-shadow>Spring Boot 注解 &amp; Thymeleaf 模板引擎</h4><p class=text-intro>By 张健</p><p><a href=https://github.com/DarkYoung class="button ghost" target=_blank><i class="fa fa-github"></i> Github</a></p></div></section><section slide class="slide bg-gradient-r aligncenter"><div class=wrap wrap=true><h1>Spring Boot 的核心</h1><hr><h3>注解</h3></div><div class=speaker-note><div class=wrap><p>springboot 的核心就是注解。springboot 通过各种组合注解，极大地简化了 spring 项目的搭建和开发</p></div></div></section><section slide class=slide><div class=wrap wrap=true><div class=content-center><h2>核心注解</h2><ul class="specs flexblock"><li class="animated fadeInUp delay-400"><div><h3>@Configuration</h3></div></li><li class="animated fadeInUp"><div><h3>@Conditional</h3></div></li><li><div><h3>@SpringBootApplication</h3></div></li></ul></div></div></section><section slide class=slide :class=slide-top><div class="wrap slide-top" wrap=true><div class=content-left><h3>核心注解： @Configuration</h3><hr><div class="tobuild fadeInUp bg-white shadow"><ul class="flexblock reasons"><li><p>用于定义配置类，可替换xml配置文件</p></li><li><p>被注解的类内部包含一个或多个被<code>@Bean</code>注解的方法，用于构建 Bean 定义</p></li></ul></div></div><div><div class="content-left tobuild fadeInRight"><h4>要求</h4><hr><ul><li class="tobuild fadeInUp"><code>@Configuration</code>不可以是<code>final</code>类型</li><li class="tobuild fadeInUp"><code>@Configuration</code>不可以是匿名类</li><li class="tobuild fadeInUp">嵌套的<code>@Configuration</code>必须是静态类</li></ul></div></div></div><div class=speaker-note><div class=wrap><p><code>@Bean</code>注解的方法将会被<code>AnnotationConfigApplicationContext</code>或<code>AnnotatonConfigWebApplicationContext</code>类扫描，并用于构建 Bean 定义，初始化 Spring 容器</p></div></div></section><section slide class="slide size-60 aligncenter"><div class=wrap wrap=true><h3>核心注解： @Conditional</h3><hr><p class="animated pulse">根据是否满足某一特定条件来决定是否创建某个特定的<strong>Bean</strong></p><p><code>例如：当某个 Bean 已经被创建（存在）时才会创建另外一个 Bean</code></p></div><div class=speaker-note><div class=wrap><p>可以依据这一特定条件来控制 Bean 的创建行为 利用这一特性可以实现一些自动的配置</p></div></div></section><section slide class=slide :class="size-100 aligncenter"><div class="wrap size-100 aligncenter" wrap=true><h4>组合条件注解</h4><hr><div class=grid><div class=column><pre class="animated fadeInUp language-java language-java"><code class="animated fadeInUp language-java"><span class="token comment">//当上下文中有指定 Bean 的条件下进行实例化</span>
<span class="token annotation punctuation">@ConditionalOnBean</span>             
<span class="token comment">//当上下文中没有指定 Bean 的条件下进行实例化</span>
<span class="token annotation punctuation">@ConditionalOnMissingBean</span>       
<span class="token comment">//当 classpath 类路径下有指定类的条件下进行实例化</span>
<span class="token annotation punctuation">@ConditionalOnClass</span>             
<span class="token comment">//当类路径下没有指定类的条件下进行实例化</span>
<span class="token annotation punctuation">@ConditionalOnMissingClass</span>      
<span class="token comment">//当项目本身是一个 Web 项目是进行实例化</span>
<span class="token annotation punctuation">@ConditionalOnWebApplication</span>    
<span class="token comment">//当项目本身不是一个 Web 项目时进行实例化</span>
<span class="token annotation punctuation">@ConditionalOnNotWebApplication</span> 
</code></pre></div><div class=column><pre class="animated fadeInUp delay-400 language-java language-java"><code class="animated fadeInUp delay-400 language-java"><span class="token comment">//当指定的属性有指定的值时进行实例化</span>
<span class="token annotation punctuation">@ConditionalOnProperty</span>          
<span class="token comment">//基于 SpEL 表达式的条件判断</span>
<span class="token annotation punctuation">@ConditionalOnExpression</span>        
<span class="token comment">//当 JVM 版本为指定的版本范围时进行实例化</span>
<span class="token annotation punctuation">@ConditionalOnJava</span>              
<span class="token comment">//当类路径下有指定资源时进行实例化</span>
<span class="token annotation punctuation">@ConditionalOnResource</span>          
<span class="token comment">//在 JNDI 存在时触发实例化</span>
<span class="token annotation punctuation">@ConditionalOnJndi</span>              
<span class="token comment">//当指定的 Bean 在容器中只有一个</span>
<span class="token comment">//或者有多个但是指定了首选的 Bean 时触发实例化 </span>
<span class="token annotation punctuation">@ConditionalOnSingleCandidate</span>   
</code></pre></div></div></div><div class=speaker-note><div class=wrap><p><code>@Conditional</code> 是 springboot 实现自动配置的关键能力 在此基础上，springboot 又创建了多个适用于不同场景的组合条件注解</p></div></div></section><section slide class=slide :class="size-60 aligncenter"><div class="wrap size-60 aligncenter" wrap=true><h3>核心注解： @SpringBootApplication</h3><hr></div><div class=speaker-note><div class=wrap><p>这是<code>Springboot</code>最核心的注解，也是个组合注解</p><p>除此之外，最核心的是<code>@EnableAutoConfiguration</code>注解，开启自动配置</p></div></div></section><section slide class=slide :class=size-100><div class="wrap size-100" wrap=true><h3>@SpringBootApplication</h3><hr><p>让 springboot 自动给程序进行必要的配置</p><ul><li>@Configuration：等同于 spring 的 XML 配置文件</li><li>@EnableAutoConfiguration：启用自动配置，尝试根据添加的 jar 包一拉自动配置 Spring 项目</li><li>@ComponentScan：组件扫描，可以自动发现和装配一些 Bean（包括@Component、@Controller、@Service等，并注册成 Bean），通常使用该注解搜索并注册 Beans，然后使用 @Autowired 注解导入</li></ul><pre class="animated fadeInUp delay-400 language-java language-java"><code class="animated fadeInUp delay-400 language-java"><span class="token annotation punctuation">@SpringBootApplication</span>
<span class="token annotation punctuation">@MapperScan</span><span class="token punctuation">(</span><span class="token string">"com.estate.estate.dao"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">BackgroundApplication</span> <span class="token punctuation">{</span>
    <span class="token keyword">public</span> <span class="token keyword">static</span> <span class="token keyword">void</span> <span class="token function">main</span><span class="token punctuation">(</span><span class="token class-name">String</span><span class="token punctuation">[</span><span class="token punctuation">]</span> args<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">SpringApplication</span><span class="token punctuation">.</span><span class="token function">run</span><span class="token punctuation">(</span><span class="token class-name">BackgroundApplication</span><span class="token punctuation">.</span><span class="token keyword">class</span><span class="token punctuation">,</span> args<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class=speaker-note><div class=wrap><p>使用注解的方式配置文件，可以通过 Java 进行类型安全检查</p><ul><li>通过注解<code>@EnalbleAutoConfiguration</code>的方式去查找、过滤和加载所需的<code>configuration</code></li><li><code>@ComponentScan</code>扫描我们自定义的<code>Bean</code></li><li><code>@SpringBootConfiguration</code>使得被<code>@SpringBootApplication</code>注解的类声明为注解类</li></ul></div></div></section><section slide class="slide aligncenter"><div class=wrap wrap=true><h2>Spring 四大注解(用于软件系统不同层次)</h2><hr><div class=grid><div class=column><h4>@Repository</h4><p>作用在数据访问层</p></div><div class=column><h4>@Component</h4><p>定义一个组件（任何层次）</p></div><div class=column><h4>@Service</h4><p>作用在业务层</p></div><div class=column><h4>@Controller</h4><p>作用在控制层</p></div></div></div><div class=speaker-note><div class=wrap><p>@Repository 能够将所标注类中抛出的数据访问异常封装为 Spring 的数据访问异常类型（Spring 封装的不同持久化框架抛出的异常，使得异常独立于底层框架）</p><p>@Component 泛指组件，当定义的组件不好归类时，可以使用该注解进行标注</p><p>@Controller 用于定义控制器类，在 springboot 项目中有控制器将用户发来的 URL 请求转发到对应的服务接口（Service 层），一般在这个注解的类中，通常配合 @RequestMapping 注解方法</p><p>@RestController 用于标注控制层组件，相当于 @ResponseBody 和 @Controller 的组合</p></div></div></section><section slide class=slide :class="size-120 aligncenter"><div class="wrap size-120 aligncenter" wrap=true><pre class="animated fadeInLeft language-java language-java"><code class="animated fadeInLeft language-java"><span class="token annotation punctuation">@Service</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">UserServiceImpl</span> <span class="token keyword">implements</span> <span class="token class-name">UserService</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>
    <span class="token keyword">private</span> <span class="token class-name">UserMapper</span> userMapper<span class="token punctuation">;</span>
    <span class="token keyword">public</span> <span class="token class-name">User</span> <span class="token function">selectByPrimaryKey</span><span class="token punctuation">(</span><span class="token class-name">String</span> userPhone<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">// 数据库事务操作</span>
        <span class="token keyword">return</span> userMapper<span class="token punctuation">.</span><span class="token function">selectByPrimaryKey</span><span class="token punctuation">(</span>userPhone<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><pre class="animated fadeInRight language-java language-java"><code class="animated fadeInRight language-java"><span class="token annotation punctuation">@Controller</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/"</span><span class="token punctuation">)</span>  <span class="token comment">// 表示该控制器处理所有 classpath:/templates/ 的 URL 请求</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">LoginController</span> <span class="token punctuation">{</span>
    <span class="token comment">// 全部基于 Thymeleaf 的默认配置，前缀为 classpath:/templates/ 后缀为.html</span>
    <span class="token comment">// 映射路径为 classpath:/templates/login.html classpath:/templates/index.html</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span>value<span class="token operator">=</span><span class="token punctuation">{</span><span class="token string">"login"</span><span class="token punctuation">,</span> <span class="token string">"index"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">,</span>  <span class="token annotation punctuation">@RequestParam</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"error"</span><span class="token punctuation">,</span> required <span class="token operator">=</span> <span class="token boolean">false</span><span class="token punctuation">)</span> <span class="token class-name">String</span> error<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">if</span> <span class="token punctuation">(</span>error <span class="token operator">!=</span> <span class="token keyword">null</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"error"</span> <span class="token punctuation">,</span> <span class="token string">"用户名或者密码错误！"</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
        <span class="token comment">//会使用 login/index.html 模板进行渲染显示，这里使用的是 html 模板文件</span>
        <span class="token keyword">return</span> <span class="token string">"login/index"</span><span class="token punctuation">;</span>   
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div></section><section slide class=slide :class="size-60 aligncenter"><div class="wrap size-60 aligncenter" wrap=true><div class=content-center><h2>RESTful</h2><ul class="specs flexblock"><li><div><h3>@RequestMapping</h3></div></li><li><div><h3>@ResponseBody</h3></div></li></ul></div></div></section><section slide class=slide :class="size-100 aligncenter"><div class="wrap size-100 aligncenter" wrap=true><h3>@RequestMapping</h3><p>提供路由信息，负责 URL 到 Controller 中具体函数的映射</p><pre class="animated fadeInUp delay-400 language-java language-java"><code class="animated fadeInUp delay-400 language-java">    <span class="token comment">// 路径为 /、/index、/index.html的 URL 都使用此方法处理</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token string">"/index"</span><span class="token punctuation">,</span> <span class="token string">"index.html"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">return</span> <span class="token string">"ad/index"</span><span class="token punctuation">;</span> <span class="token comment">// 使用 ad/index.html 模板进行渲染显示</span>
    <span class="token punctuation">}</span>
    <span class="token comment">// 路径为 /detail/{adId} 的 URL 请求都使用此方法处理（{adId}表示变量）</span>
    <span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/detail/{adId}"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">detail</span><span class="token punctuation">(</span>
        <span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"adId"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> adId<span class="token punctuation">,</span> 
        <span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        \\……
        <span class="token keyword">return</span> <span class="token string">"ad/detail"</span><span class="token punctuation">;</span> <span class="token comment">// 使用 ad/detail.html 模板进行渲染显示</span>
    <span class="token punctuation">}</span>
</code></pre></div></section><section slide class=slide :class="size-100 aligncenter"><div class="wrap size-100 aligncenter" wrap=true><h3>@ResponseBody</h3><p>将返回的结果直接写入 HTTP Response Body 中</p><pre class="animated fadeInUp delay-400 language-java language-java"><code class="animated fadeInUp delay-400 language-java"><span class="token annotation punctuation">@RestController</span> <span class="token comment">// 相当于 @Controller 和 @ResponseBody 的组合</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token string">"/api/ad"</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">AdController</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Autowired</span>  <span class="token comment">// 自动装配</span>
    <span class="token keyword">private</span> <span class="token class-name">AdService</span> adService<span class="token punctuation">;</span>
    <span class="token comment">// 此方法接受一个 GET 请求，路径为 /detail/{id}， {id} 表示变量</span>
    <span class="token comment">// produces 指定 Content-Type 为 json 数据，编码格式为 UTF-8</span>
    <span class="token annotation punctuation">@GetMapping</span><span class="token punctuation">(</span>value <span class="token operator">=</span> <span class="token string">"/detail/{id}"</span><span class="token punctuation">,</span> produces <span class="token operator">=</span> <span class="token string">"application/json;charset=UTF-8"</span><span class="token punctuation">)</span>
    <span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">getDetailByAdId</span><span class="token punctuation">(</span><span class="token annotation punctuation">@PathVariable</span><span class="token punctuation">(</span><span class="token string">"id"</span><span class="token punctuation">)</span> <span class="token class-name">String</span> id<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">JSONObject</span> jsonObject <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DuoDuoJson</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//……</span>
        <span class="token class-name">Ad</span> ad <span class="token operator">=</span> adService<span class="token punctuation">.</span><span class="token function">selectByPrimaryKey</span><span class="token punctuation">(</span><span class="token function">parseInt</span><span class="token punctuation">(</span>id<span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token comment">//……</span>
        <span class="token comment">// 使用 @ResponseBody 注解后，返回 json 数据，而不是解析成跳转路径</span>
        <span class="token keyword">return</span> jsonObject<span class="token punctuation">.</span><span class="token function">toString</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>   
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre></div><div class=speaker-note><div class=wrap><p>@ResponseBody 一般在异步获取数据时调用，用于构建 RESTful 的 api 在使用 @RequestMapping 后，返回值通常解析为跳转路径（直接或间接转换，最后都是转换成 ModelAndView） 加上 @ResponseBody 后返回结果不会被解析成跳转路径，而是直接写入 HTTP Response Body 中 比如异步获取 json 数据，使用该注解将返回 json 数据</p></div></div></section><section slide class="slide bg-gradient-r aligncenter"><div class=wrap wrap=true><h1>Thymeleaf</h1><hr><p>模板引擎（Spring Boot 官方推荐）</p></div><div class=speaker-note><div class=wrap><p>模板引擎的作用都是将模板（页面）和数据进行整合然后输出显示</p></div></div></section><section slide class=slide><div class=wrap wrap=true><div class=text-cols><p class="flipInX animated"><strong>Why Thymeleaf?</strong></p><p><strong>Thymeleaf</strong> 是 Web 和独立环境的现代服务器端 Java 模板引擎，能够处理 HTML，XML，JavaScript，CSS 甚至是纯文本</p></div><ul><li class="tobuild fadeInRight">建立在自然模板的概念上，将其逻辑注入到模板文件中，不会影响模板被用作设计原型</li><li class="tobuild fadeInRight">设计了 Web 标准（特别是 HTML5），可以创建<strong>完全验证的模板</strong></li><li class="tobuild fadeInRight">Spring Boot <strong>官方推荐</strong>使用 Thymeleaf 而不是 JSP</li><li class="tobuild fadeInRight">Spring Boot 开发的 Web 项目采用打 Jar 包的方式，且使用内置的 Tomcat，因此<strong>默认不支持 JSP</strong></li><li class="tobuild fadeInRight">使用<strong>简单</strong>，因为 Spring Boot 已经提供了默认的配置，比如解析的文件前缀、文件后缀、文件编码、缓存等等，只需要写 HTML</li></ul></div></section><section slide class=slide :class=size-100><div class="wrap size-100" wrap=true><h3>使用步骤</h3><hr><div><ul><li>在 pom.xml 中引入 thymeleaf</li></ul><pre class=language-xml><code class=language-xml><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>dependency</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>groupId</span><span class="token punctuation">></span></span>org.springframework.boot<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>groupId</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>artifactId</span><span class="token punctuation">></span></span>spring-boot-starter-thymeleaf<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>artifactId</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>dependency</span><span class="token punctuation">></span></span>
</code></pre><ul><li>配置 thymeleaf</li></ul><pre class=language-yaml><code class=language-yaml><span class="token key atrule">thymeleaf</span><span class="token punctuation">:</span>
     <span class="token key atrule">cache</span><span class="token punctuation">:</span> <span class="token boolean important">false                   </span><span class="token comment"># 开发过程中建议关闭缓存   </span>
     <span class="token key atrule">prefix</span><span class="token punctuation">:</span> classpath<span class="token punctuation">:</span>/templates/  <span class="token comment"># 映射文件的前缀</span>
     <span class="token key atrule">suffix</span><span class="token punctuation">:</span> .html                  <span class="token comment"># 映射文件的后缀</span>
     <span class="token key atrule">encoding</span><span class="token punctuation">:</span> UTF<span class="token punctuation">-</span><span class="token number">8                </span><span class="token comment"># 编码</span>
     <span class="token key atrule">servlet</span><span class="token punctuation">:</span>
      <span class="token key atrule">content-type</span><span class="token punctuation">:</span> text/html
     <span class="token key atrule">mode</span><span class="token punctuation">:</span> HTML5                    <span class="token comment"># 启用 HTML5</span>

</code></pre><ul><li>编写模板文件 <em>/</em>.html</li><li>编写访问模板文件对应的 Controller</li></ul></div></div></section><section slide class="slide aligncenter"><div class=wrap wrap=true><h3>基本表达式</h3><hr><ul class="animated fadeInUp flexblock"><li><h4><code>${}</code></h4><p>变量表达式</p></li><li><h4><code>*{}</code></h4><p>选择表达式</p></li><li><h4><code>#{}</code></h4><p>消息表达式</p></li><li><h4><code>@{}</code></h4><p>超链接表达式</p></li></ul></div></section><section slide class="slide slide-top"><div class=wrap wrap=true><div class=content-left><h3>变量表达式：${}</h3><p class=text-data>变量表达式（美元表达式），用于访问上下文中的变量</p><pre class="animated fadeInUp language-java language-java"><code class="animated fadeInUp language-java"><span class="token comment">// 初始页面，会返回所有的用户</span>
<span class="token annotation punctuation">@RequestMapping</span><span class="token punctuation">(</span><span class="token punctuation">{</span><span class="token string">"/"</span><span class="token punctuation">,</span> <span class="token string">"/index"</span><span class="token punctuation">,</span> <span class="token string">"/index.html"</span><span class="token punctuation">,</span> <span class="token string">""</span><span class="token punctuation">}</span><span class="token punctuation">)</span>
<span class="token keyword">public</span> <span class="token class-name">String</span> <span class="token function">index</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token comment">// 传入需要显示的数据</span>
    <span class="token function">addModelBeforeReturnIndex</span><span class="token punctuation">(</span>model<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 使用 partner/index.html 模板进行渲染显示</span>
    <span class="token keyword">return</span> <span class="token string">"partner/index"</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
<span class="token keyword">private</span> <span class="token keyword">void</span> <span class="token function">addModelBeforeReturnIndex</span><span class="token punctuation">(</span><span class="token class-name">Model</span> model<span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Partner</span><span class="token punctuation">></span></span> partnerList <span class="token operator">=</span> partnerService<span class="token punctuation">.</span><span class="token function">selectAll</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token comment">// 传入对象</span>
    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"partnerList"</span><span class="token punctuation">,</span> partnerList<span class="token punctuation">)</span><span class="token punctuation">;</span> 
    <span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">String</span><span class="token punctuation">></span></span> fields <span class="token operator">=</span> <span class="token function">getFields</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    model<span class="token punctuation">.</span><span class="token function">addAttribute</span><span class="token punctuation">(</span><span class="token string">"fields"</span><span class="token punctuation">,</span> fields<span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre></div><div class="content-right tobuild lightSpeedIn"><h4>partner/index.html</h4><pre class=language-html><code class=language-html><span class="token comment">&lt;!-- 使用变量表达式访问上下文中的变量（传入的对象） --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>partner, status: ${partnerList}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- …… --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>
</code></pre></div></div><div class=speaker-note><div class=wrap><p>变量表达式（美元表达式），用于访问上下文中的变量，该变量可能来自于路由选择时设置的值</p></div></div></section><section slide class=slide :class="size-60 aligncenter"><div class="wrap size-60 aligncenter" wrap=true><h3>选择表达式：*{}</h3><p class=text-intro>选择表达式（星号表达式），选择<code>th:object</code>对象属性绑定的对象中的属性</p><pre class="animated fadeInUp language-html language-html"><code class="animated fadeInUp language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>object</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${session.user}<span class="token punctuation">"</span></span> <span class="token punctuation">></span></span><span class="token comment">&lt;!-- 指定对象 --></span>
    <span class="token comment">&lt;!-- 访问指定对象的属性，这里 *{name} 相当于 ${session.user.name} --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>姓名: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>*{name}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>张三<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>   
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span><span class="token punctuation">></span></span>手机号: <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span></span> <span class="token attr-name">text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>*{phoneNumber}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>12345<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
</code></pre></div><div class=speaker-note><div class=wrap><p>选择表达式（星号表达式）。</p><p>选择表达式与变量表达式有一个重要的区别：选择表达式计算的是选定的对象，而不是整个环境变量映射。 也就是：如果没有指定选择的对象，选择表达式与变量表达式的语法是完全一样的。</p><p>那什么是选择的对象呢？是一个<code>th:object</code>对象属性绑定的对象。</p></div></div></section><section slide class=slide><div class=wrap wrap=true><h3>消息表达式：#{}</h3><p class="text-intro animated fadeInLeft">消息表达式（资源表达式），通常与th::text属性一起使用</p><pre class="animated fadeInRight delay-400 language-html language-html"><code class="animated fadeInRight delay-400 language-html">    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>p</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>#{user.name}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>张三<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>p</span><span class="token punctuation">></span></span>
</code></pre><ul><li class="animated fadeInLeft delay-800">消息表达式通常用于显示页面静态文本</li><li class="animated fadeInRight delay-1200">对应的静态文本通常维护在<code>properties</code>或<code>yml</code>文件中</li></ul><pre class="animated fadeInLeft delay-1600 language-yaml language-yaml"><code class="animated fadeInLeft delay-1600 language-yaml">    <span class="token comment"># /WEB-INF/templates/user.yml</span>
    <span class="token key atrule">user.name</span><span class="token punctuation">:</span> 王五
</code></pre></div><div class=speaker-note><div class=wrap><p>与<code>th:text</code>属性一起使用，指明声明了<code>th:text</code>的标签的文本是<code>#{}</code>中的<code>key</code>所对应的<code>value</code>，而标签内的文本将不会显示。</p><p>将静态文本维护在<code>properties</code>或<code>yml</code>文件中有几个好处，比如：方便维护，做国际化等。</p><p><code>yml</code>文件配置较<code>properties</code>文件友好，采用缩进式配置，避免了较长的引用名（spring.datasource.url等）</p></div></div></section><section slide class=slide><div class=wrap wrap=true><h3>超链接表达式：@{}</h3><pre class="animated fadeInUp language-html language-html"><code class="animated fadeInUp language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/css/bootstrap.css}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/css/header.css}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/css/footer.css}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>link</span> <span class="token attr-name">rel</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>stylesheet<span class="token punctuation">"</span></span> <span class="token attr-name">type</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>text/css<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/css/main.css}<span class="token punctuation">"</span></span><span class="token punctuation">/></span></span>
</code></pre></div></section><section slide class="slide aligncenter"><div class=wrap wrap=true><h3>常用属性</h3><hr><ul class=flexblock><li class="animated flipInX delay-400"><h4><code>th:action</code></h4></li><li class="animated flipInX delay-500"><h4><code>th:each</code></h4></li><li class="animated flipInX delay-600"><h4><code>th:field</code></h4></li><li class="animated flipInX delay-700"><h4><code>th:id</code></h4></li><li><h4><code>th:text</code></h4></li><li><h4><code>th:value</code></h4></li><li><h4><code>th:href</code></h4></li><li><h4><code>th:src</code></h4></li><li><h4><code>th:if</code></h4></li><li><h4><code>th:fragment</code></h4></li><li><h4><code>th:replace</code></h4></li><li><h4><code>th:include</code></h4></li></ul></div><div class=speaker-note><div class=wrap><p>使用前提，和springboot所需要的其他依赖包一样，可以在maven中添加对应的依赖 指定命名空间，这样就可以根据语法规则来使用thymeleaf了</p></div></div></section><section slide class="slide aligncenter"><div class=wrap wrap=true><h4>th::fragment</h4><pre class="animated fadeInUp language-java language-java"><code class="animated fadeInUp language-java">        mav <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ModelAndView</span><span class="token punctuation">(</span><span class="token string">"index/index"</span><span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 使用 index 目录下的 index.html 进行渲染显示</span>
        page<span class="token punctuation">.</span><span class="token function">setPageIndex</span><span class="token punctuation">(</span><span class="token class-name">Page</span><span class="token punctuation">.</span><span class="token class-name">Index</span><span class="token punctuation">.</span>HOME<span class="token punctuation">)</span><span class="token punctuation">;</span> <span class="token comment">// 设置当前（首页）Tab 高亮</span>
        mav<span class="token punctuation">.</span><span class="token function">addObject</span><span class="token punctuation">(</span><span class="token string">"page"</span><span class="token punctuation">,</span> page<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">return</span> mav<span class="token punctuation">;</span>   
</code></pre><pre class="animated fadeInUp delay-400 language-html language-html"><code class="animated fadeInUp delay-400 language-html"><span class="token comment">&lt;!-- header.html --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>ul</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>nav nav-tabs<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>fragment</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>fragment-header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- 声明一个碎片，命名为 fragment-header --></span>
    <span class="token comment">&lt;!-- 根据不同参数（当前活动页面）高亮不同 tab 选项 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>presentation<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${page.getPageIndex()==0}?'active'<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/index}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>Home<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>li</span> <span class="token attr-name">role</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>presentation<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${page.getPageIndex()==1}?'active'<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>@{/property/}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>房屋住户管理<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>li</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- …… 其他 Tab 选项 …… --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>ul</span><span class="token punctuation">></span></span>
</code></pre><pre class="animated fadeInUp delay-800 language-html language-html"><code class="animated fadeInUp delay-800 language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name">id</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>header<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- index.html --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>div</span> <span class="token attr-name"><span class="token namespace">th:</span>replace</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>~{header :: fragment-header}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span> <span class="token comment">&lt;!-- 将当前元素替换为 header.html 文件下定义的 fragment-header 碎片 --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>div</span><span class="token punctuation">></span></span>
</code></pre><ul class="animated fadeInUp delay-800 flexblock"><li><a href=https://github.com/DarkYoung/Property_Management_System/blob/master/src/main/resources/templates/header.html class="button ghost radius" target=_blank><i class="fa fa-github"></i> 源代码</a></li><li><a href=http://47.102.98.109:9999/index class="button radius" target=_blank><i class="fa fa-link"></i> 演示</a></li></ul></div><div class=speaker-note><div class=wrap><p>本次课程使用的 Demo 不方便演示，因此使用了上学期《数据库设计》的物业管理系统项目</p></div></div></section><section slide class="slide aligncenter"><div class=wrap wrap=true><pre class="animated fadeInUp language-html language-html"><code class="animated fadeInUp language-html"><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>caption</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>用户数目: ' + ${userList.size()} + ''<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>caption</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>thead-dark<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>#'+${userList.size()}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- switch语句，根据变量设置对应的中文字段名 --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>field: ${fields}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>switch</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${field.getName()}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>userPhone<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>电话<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>name<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>姓名<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>gender<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>性别<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>label</span> <span class="token attr-name"><span class="token namespace">th:</span>case</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>signDate<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>注册日期<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>label</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- 相当于 jsp 中的 forEach， user 是要迭代的变量，userList 是要迭代的列表
    status 是一个状态变量（包含count、first等属性） --></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>user, status: ${userList}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>|${status.count}|<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>field: ${fields}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${field.getName()=='signDate'}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${#dates.format(user[field.getName()],'yyyy-MM-dd')}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
            <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>span</span> <span class="token attr-name"><span class="token namespace">th:</span>if</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${field.getName()!='signDate'}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${user[field.getName()]}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>span</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">></span></span>
</code></pre></div><div class=speaker-note><div class=wrap><p>status 是状态变量，包含下列属性：</p><ul><li>index：当前迭代对象的迭代索引，从0开始，这是索引属性</li><li>count：当前迭代对象的迭代索引，从1开始，这个是统计属性</li><li>size：迭代变量元素的总量，这是被迭代对象的大小属性</li><li>current：当前迭代变量</li><li>even/odd：布尔值，当前循环是否是偶数/奇数（从0开始计算）</li><li>first：布尔值，当前循环是否是第一个</li><li>last：布尔值，当前循环是否是最后一个</li></ul></div></div></section><section slide class="slide aligncenter"><div class=wrap wrap=true><pre class="animated fadeInUp language-html language-html"><code class="animated fadeInUp language-html"><span class="token comment">&lt;!-- residentceList 是从路由控制器传过来的待渲染显示的数据（对象链表） --></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>caption</span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${title}+'：共' + ${residenceList.size()} + '条'<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>caption</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>thead</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>thead-dark<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>#'+${residenceList.size()}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
    <span class="token comment">&lt;!-- fields 为对象声明的属性集合（通过反射得到） --></span>
    <span class="token comment">&lt;!-- FOEMap 是一个 JSONObject，key 为 Bean 定义的属性名， value 为对应的中文/英文名（方便国际化处理）--></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>field: ${fields}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${FOEMap[field.getName()]}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>col<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>绑定户主<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>thead</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tbody</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>tr</span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>residence, status: ${residenceList}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span> 
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>th</span> <span class="token attr-name">scope</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>row<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>|${status.count}|<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>th</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>each</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>field: ${fields}<span class="token punctuation">"</span></span> <span class="token attr-name"><span class="token namespace">th:</span>text</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>${residence[field.getName()]}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>
        <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>td</span> <span class="token attr-name">class</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span>list<span class="token punctuation">"</span></span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;</span>a</span> <span class="token attr-name"><span class="token namespace">th:</span>href</span><span class="token attr-value"><span class="token punctuation">=</span><span class="token punctuation">"</span><span class="token punctuation">'</span>bind?id='+${residence[fields.get(0).getName()]}<span class="token punctuation">"</span></span><span class="token punctuation">></span></span>绑定<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>a</span><span class="token punctuation">></span></span><span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>td</span><span class="token punctuation">></span></span>
    <span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tr</span><span class="token punctuation">></span></span>
<span class="token tag"><span class="token tag"><span class="token punctuation">&lt;/</span>tbody</span><span class="token punctuation">></span></span>
</code></pre><ul class="animated fadeInUp delay-800 flexblock"><li><a href=https://github.com/DarkYoung/Property_Management_System/blob/master/src/main/resources/templates/property/showIdleResidences.html class="button ghost radius" target=_blank><i class="fa fa-github"></i> 源代码</a></li><li><a href=http://47.102.98.109:9999/property/idle class="button radius" target=_blank><i class="fa fa-link"></i> 演示</a></li></ul></div></section><section slide class="slide aligncenter" image=../img/hello.jpg><span class=background style="background-image:url('../img/hello.jpg')"></span><div class=wrap wrap=true><p><a href="http://47.100.106.153/adweb/pre/#slide=1" class="button radius animated flipInX delay-400" target=_blank>Part 2</a></p></div></section><section slide class=slide image="https://source.unsplash.com/UJbHNoVPZW0/ .dark"><span class="background dark" style="background-image:url('https://source.unsplash.com/UJbHNoVPZW0/')"></span><div class=wrap wrap=true></div></section></article></div><script src=//cdn.staticfile.org/echarts/4.1.0-release/echarts.min.js></script><script>window.pluginsOptions = {}



document.addEventListener('DOMContentLoaded', () => {
    const ws = new WebSlides({
        loop: false
    })
    window.wsInstance = ws;
}, false)</script><script src=./js/chunk-vendors.70644670.js></script><script src=./js/slide.03115384.js></script></body></html>